<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stundenverlaufsplan-Ersteller</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ“š Stundenverlaufsplan-Ersteller</h1>
        </header>

        <main>
            <!-- Grundeinstellungen -->
            <section class="basic-info">
                <div class="input-group">
                    <label for="lesson-title">Stundentitel:</label>
                    <input type="text" id="lesson-title" placeholder="Titel der Unterrichtsstunde eingeben...">
                </div>
                
                <div class="time-and-ai">
                    <div class="input-group">
                        <label for="start-time">Startzeit:</label>
                        <input type="time" id="start-time" value="08:00">
                    </div>
                    <button type="button" id="ai-prompt-btn" class="ai-btn" title="KI-Prompt fÃ¼r Stundenerstellung">
                        ðŸ¤– KI-Prompt
                    </button>
                </div>
            </section>

            <!-- Lernziele -->
            <section class="learning-objectives">
                <h2>Lernziele</h2>
                <div id="objectives-container">
                    <div class="objective-item">
                        <input type="text" class="objective-input" placeholder="Lernziel eingeben...">
                        <button type="button" class="remove-objective" style="display: none;">âœ•</button>
                    </div>
                </div>
            </section>

            <!-- Unterrichtsphasen -->
            <section class="lesson-phases">
                <h2>Unterrichtsphasen</h2>
                <div id="phases-container">
                    <!-- Phasen werden hier dynamisch hinzugefÃ¼gt -->
                </div>
                <button type="button" id="add-phase" class="add-btn">+ Neue Phase</button>
            </section>

            <!-- Aktionen -->
            <section class="actions">
                <div class="action-buttons">
                    <button type="button" id="export-pdf" class="primary-btn">ðŸ“„ PDF Exportieren</button>
                    <button type="button" id="export-json" class="secondary-btn">ðŸ’¾ JSON Speichern</button>
                    <button type="button" id="import-json" class="secondary-btn">ðŸ“‚ JSON Laden</button>
                    <input type="file" id="json-file-input" accept=".json" style="display: none;">
                </div>
            </section>
        </main>
    </div>

    <!-- KI-Prompt Modal -->
    <div id="ai-prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ðŸ¤– KI-Prompt fÃ¼r Stundenerstellung</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p><strong>Kopieren Sie diesen Prompt und verwenden Sie ihn in Ihrem bevorzugten KI-Chat:</strong></p>
                <textarea id="ai-prompt-text" readonly>Du bist ein Experte fÃ¼r Unterrichtsplanung. Erstelle basierend auf dem folgenden Kontext einen detaillierten Stundenverlaufsplan.

WICHTIG: Antworte ausschlieÃŸlich mit einem gÃ¼ltigen JSON-Objekt im folgenden Format (ohne zusÃ¤tzlichen Text):

{
  "lessonTitle": "Titel der Stunde",
  "startTime": "08:00",
  "objectives": [
    "Lernziel 1",
    "Lernziel 2",
    "Lernziel 3"
  ],
  "phases": [
    {
      "duration": 10,
      "socialForm": "Plenum",
      "taskTitle": "Einstieg",
      "implementation": "â€¢ BegrÃ¼ÃŸung der SchÃ¼ler\nâ€¢ Wiederholung der letzten Stunde\nâ€¢ HinfÃ¼hrung zum Thema",
      "materials": "Tafel, Arbeitsblatt"
    },
    {
      "duration": 20,
      "socialForm": "Einzelarbeit",
      "taskTitle": "Erarbeitung",
      "implementation": "â€¢ SchÃ¼ler bearbeiten Aufgaben\nâ€¢ Lehrer unterstÃ¼tzt individuell\nâ€¢ Schwierigkeiten werden besprochen",
      "materials": "Arbeitsblatt, Stifte"
    },
    {
      "duration": 15,
      "socialForm": "Plenum",
      "taskTitle": "Sicherung",
      "implementation": "â€¢ Ergebnisse werden prÃ¤sentiert\nâ€¢ Gemeinsame Reflexion\nâ€¢ Zusammenfassung der Lerninhalte",
      "materials": "Tafel"
    }
  ],
  "createdAt": "2024-01-01T00:00:00.000Z",
  "version": "1.0"
}

GÃ¼ltige Sozialformen: "Einzelarbeit", "Partnerarbeit", "Gruppenarbeit", "Plenum", "Lehrer-SchÃ¼ler-GesprÃ¤ch", "Stillarbeit"

KONTEXT FÃœR DIE STUNDENERSTELLUNG:
[Hier fÃ¼gen Sie Ihren gewÃ¼nschten Stundenkontext ein, z.B.:
- Fach: Mathematik
- Klassenstufe: 7. Klasse
- Thema: Prozentrechnung
- Dauer: 45 Minuten
- Besonderheiten: EinfÃ¼hrungsstunde, heterogene Lerngruppe]</textarea>
                <div class="modal-actions">
                    <button type="button" id="copy-prompt" class="primary-btn">ðŸ“‹ Prompt kopieren</button>
                    <button type="button" class="secondary-btn close-modal">SchlieÃŸen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template fÃ¼r Unterrichtsphasen -->
    <template id="phase-template">
        <div class="phase-header">
            <span class="phase-number">Phase 1</span>
            <div class="phase-controls">
                <button type="button" class="move-up" title="Nach oben">â†‘</button>
                <button type="button" class="move-down" title="Nach unten">â†“</button>
                <button type="button" class="remove-phase" title="Entfernen">âœ•</button>
            </div>
        </div>
        <div class="phase-content">
            <div class="input-row">
                <div class="input-group duration">
                    <label>Dauer (Min):</label>
                    <input type="number" class="duration-input" min="1" value="10">
                </div>
                <div class="input-group time-display">
                    <label>Zeitraum:</label>
                    <span class="time-range">08:00 - 08:10</span>
                </div>
            </div>
            <div class="input-row">
                <div class="input-group">
                    <label>Sozialform:</label>
                    <select class="social-form">
                        <option value="Einzelarbeit">Einzelarbeit</option>
                        <option value="Partnerarbeit">Partnerarbeit</option>
                        <option value="Gruppenarbeit">Gruppenarbeit</option>
                        <option value="Plenum">Plenum</option>
                        <option value="Lehrer-SchÃ¼ler-GesprÃ¤ch">Lehrer-SchÃ¼ler-GesprÃ¤ch</option>
                        <option value="Stillarbeit">Stillarbeit</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Titel/Aufgabe:</label>
                    <input type="text" class="task-title" placeholder="Titel der Unterrichtsphase...">
                </div>
            </div>
            <div class="input-row">
                <div class="input-group full-width">
                    <label>DurchfÃ¼hrung:</label>
                    <textarea class="implementation" rows="4" placeholder="Beschreibung der DurchfÃ¼hrung...
â€¢ Bulletpoint 1
â€¢ Bulletpoint 2"></textarea>
                </div>
            </div>
            <div class="input-row">
                <div class="input-group full-width">
                    <label>Material/Tafelbild:</label>
                    <textarea class="materials" rows="2" placeholder="Material und Tafelbild..."></textarea>
                </div>
            </div>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>